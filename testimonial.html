<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Leave a testimonial for Sacco Construction." />
  <title>Client Testimonial | Sacco Construction</title>
  <link rel="stylesheet" href="styles.css" />

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WCTK4KXJPP"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-WCTK4KXJPP');
  </script>
</head>

<body>
  <header class="site-header" id="siteHeader">
    <div class="container header-inner">
      <a class="brand" href="/" aria-label="Sacco Construction home">
        <img src="assets/LOGO.jpg" alt="Sacco Construction logo" class="logo" />
      </a>

      <nav class="nav" aria-label="Primary">
        <a href="/#services">Services</a>
        <a href="/#about">About</a>
        <a href="/#gallery">Gallery</a>
        <a href="/#contact" class="btn btn-outline">Request an Estimate</a>
        <a href="tel:16033399116" class="btn btn-solid">Call 603-339-9116</a>
      </nav>
    </div>
  </header>

  <main id="top">
    <section class="section">
      <div class="container">
        <div class="section-head">
          <h2>Client Testimonial</h2>
          <p>
            If we’ve worked together before, I’d really appreciate a quick testimonial. Honest feedback helps homeowners feel confident
            and helps me keep improving. Thank you.
          </p>
        </div>

        <form id="testimonialForm" class="form" action="https://formspree.io/f/xeekojdo" method="POST">
          <!-- NOTE: replace the action above with a NEW Formspree endpoint if you want testimonials separate from estimate requests -->
          <input type="hidden" name="source" value="Website Testimonial" />
          <input type="hidden" name="domain" value="sacco-construction.com" />
          <input type="hidden" name="_subject" value="NEW TESTIMONIAL — Sacco Construction Website" />

          <div class="grid2">
            <label>
              Your Name
              <input name="name" type="text" placeholder="First name + last initial is fine" required />
            </label>

            <label>
              Town
              <input name="town" type="text" placeholder="Example: Salem, NH" required />
            </label>
          </div>

          <div class="grid2">
            <label>
              Project Type
              <select name="project_type" required>
                <option value="" disabled selected>Select one</option>
                <option>Kitchen</option>
                <option>Bathroom</option>
                <option>Finished basement</option>
                <option>Interior remodeling</option>
                <option>Deck</option>
                <option>Light commercial</option>
                <option>Other</option>
              </select>
            </label>

            <label>
              Approx. Year (optional)
              <input name="year" type="text" placeholder="Example: 2024" />
            </label>
          </div>

          <label>
            Your Testimonial
            <textarea name="testimonial" rows="7" placeholder="What did you like about working with us? Communication, cleanliness, quality, timeline, etc." required></textarea>
          </label>

          <div class="grid2">
            <label>
              Rating (optional)
              <select name="rating">
                <option value="" selected>Leave blank</option>
                <option>5</option>
                <option>4</option>
                <option>3</option>
                <option>2</option>
                <option>1</option>
              </select>
            </label>

            <label>
              Email (optional)
              <input name="email" type="email" placeholder="Only if you'd like a follow-up" />
            </label>
          </div>

          <label style="margin-top:10px;">
            <input type="checkbox" name="permission_publish" required style="width:auto; margin-right:10px;">
            I give Sacco Construction permission to publish my testimonial on the website and marketing materials (name + town + project type).
          </label>

          <label style="margin-top:6px;">
            <input type="checkbox" name="permission_contact" style="width:auto; margin-right:10px;">
            It’s okay to contact me if there are questions about this testimonial.
          </label>

          <button class="btn btn-solid" type="submit">Submit Testimonial</button>

          <p class="small muted" style="margin-top:10px;">
            Prefer to send it by text/email? No problem. Just message Anthony at
            <a href="tel:16033399116">603-339-9116</a> or
            <a href="mailto:estimate@sacco-construction.com">estimate@sacco-construction.com</a>.
          </p>
        </form>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container footer-inner">
      <p>© <span id="y"></span> Sacco Construction LLC. All rights reserved.</p>
      <p><a href="tel:16033399116">603-339-9116</a> · <a href="mailto:estimate@sacco-construction.com">estimate@sacco-construction.com</a></p>
    </div>
  </footer>

  <script>
    document.getElementById("y").textContent = new Date().getFullYear();
  </script>

  <!-- Redirect on submit (Formspree AJAX) -->
  <script>
    (function () {
      const form = document.getElementById("testimonialForm");
      if (!form) return;

      form.addEventListener("submit", async function (e) {
        e.preventDefault();

        const submitBtn = form.querySelector('button[type="submit"], input[type="submit"]');
        const originalText = submitBtn ? submitBtn.textContent : "";

        try {
          if (submitBtn) {
            submitBtn.disabled = true;
            submitBtn.textContent = "Sending...";
          }

          const formData = new FormData(form);

          const res = await fetch(form.action, {
            method: "POST",
            body: formData,
            headers: { "Accept": "application/json" }
          });

          if (res.ok) {
            window.location.href = "/testimonial-thank-you.html";
            return;
          }

          let msg = "Something went wrong submitting the form. Please try again or text 603-339-9116.";
          try {
            const data = await res.json();
            if (data && data.errors && data.errors.length) {
              msg = data.errors.map(e => e.message).join(" ");
            }
          } catch (_) {}

          alert(msg);
        } catch (err) {
          alert("Network error. Please try again or text 603-339-9116.");
        } finally {
          if (submitBtn) {
            submitBtn.disabled = false;
            submitBtn.textContent = originalText || "Submit";
          }
        }
      });
    })();
  </script>
</body>
</html>
